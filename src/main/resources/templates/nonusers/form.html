<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" 
         rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
      <link rel="stylesheet" type="text/css" th:href="@{/signup.css}">
      <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}" />
      <script th:src="@{/js/jquery.min.js}" defer></script>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js "></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
      <script th:src="@{/js/bootstrap.min.js}" defer></script>
      <script type="text/javascript" th:src="@{/js/nonuser-pdf.js}" defer></script>
      <title>Emergency Form</title>
   </head>
   <body>

      <button id="printButton" onclick="print()">Print</button>


      <!-- Progress bar -->
      <div class="progress-container">
         <div class="progress" style="height: 10px;">
            <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
         </div>
      </div>




      <div class="mask d-flex align-items-center h-100 gradient-custom-3" id="printContent">
        <div class="container h-100">
          <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col-12 col-md-9 col-lg-7 col-xl-6">
              <div class="card" style="border-radius: 15px;">
                <div class="card-body p-5">
                  <div class="text-center mb-5">
                    <img th:src="@{/imgs/logo.png}" width="100" height="25" alt="Logo" class="logo-img">
                  </div>
                  <h2 class="text-uppercase text-center mb-5">Enter user info</h2>
                 
                
                  <form th:object="${nonUser}">
                    <div th:if="${errorMessage}">
                      <p th:text="${errorMessage}"></p>
                  </div>
                  <div class="form-outline mb-4">
                    <input type="text" id="signup_FirstName" name="name" placeholder="Name" th:field="*{name}" class="form-control form-control-lg" />
                  </div>
                  <div class="form-outline mb-4">
                      <input type="text" id="signup_LastName" name="last_name" placeholder="Last Name" th:field="*{last_name}" class="form-control form-control-lg" />
                  </div>
                  <div class="form-outline mb-4">
                    <input type="text" id="signup_Phone" name="phone" placeholder="Phone number" th:field="*{phone}" class="form-control form-control-lg" />
                  </div>
                  <div class="form-outline mb-4">
                      <input type="text" id="signup_Address" name="address" placeholder="Address" th:field="*{address}" class="form-control form-control-lg" />
                  </div>
                  </form>




                           <!-- Initial set of questions -->
                           <p class="fs-4">Is this:</p>
                           <div class="form-check">
                              <input class="form-check-input" type="radio" name="response_type" id="response_type1">
                              <label class="form-check-label" for="response_type1">
                              Fire Department or First Response
                              </label>
                           </div>
                           <div class="form-check">
                              <input class="form-check-input" type="radio" name="response_type" id="response_type2">
                              <label class="form-check-label" for="response_type2">
                              General Public
                              </label>
                           </div>
                           <p class="fs-4">What is the type of building:</p>
                           <div class="form-check">
                              <input class="form-check-input" type="radio" name="building_type" id="building_type1">
                              <label class="form-check-label" for="building_type1">
                              Public Use Building
                              </label>
                           </div>
                           <div class="form-check">
                              <input class="form-check-input" type="radio" name="building_type" id="building_type2">
                              <label class="form-check-label" for="building_type2">
                              Residential / Private Use Building
                              </label>
                           </div>
                           <p class="fs-4">What is the nature of this Emergency:</p>
                           <div class="form-check">
                              <input class="form-check-input" type="radio" name="emergency_nature" value="emergency_nature1">
                              <label class="form-check-label" for="emergency_nature1">
                              Meter Hazard
                              </label>
                           </div>
                           <div class="form-check">
                              <input class="form-check-input" type="radio" name="emergency_nature" value="emergency_nature2">
                              <label class="form-check-label" for="emergency_nature2">
                              Appliance / Heating System / Hot Water Tank
                              </label>
                           </div>




                           <!-- Appliance set of questions -->
                           <div class="collapse" id="appliance_choose">
                              <div class="card card-body">
                                 <p class="fs-4">Choose the description of your problem:</p>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="appliance_desc" value="appliance_desc1">
                                    <label class="form-check-label" for="appliance_desc1">
                                    Hot Water Tank Leaking OR burst
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="appliance_desc" value="appliance_desc2">
                                    <label class="form-check-label" for="appliance_desc2">
                                    Heating System "BOOMs" on start-up
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="appliance_desc" value="appliance_desc3">
                                    <label class="form-check-label" for="appliance_desc3">
                                    Fireplace Glass Shattered OR Cracked
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="appliance_desc" value="appliance_desc4">
                                    <label class="form-check-label" for="appliance_desc4">
                                    Flames Rolling out of Appliance
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="appliance_desc" value="appliance_desc5">
                                    <label class="form-check-label" for="appliance_desc5">
                                    Overheating / Unable to Turn off Gas to Appliance
                                    </label>
                                 </div>
                                 <div class="form-check">
                                  <input class="form-check-input" type="radio" name="appliance_desc" value="appliance_desc6">
                                  <label class="form-check-label" for="appliance_desc6">
                                  Appliance Not Working
                                  </label>
                               </div>
                              </div>
                           </div>

                          <!-- Appliance gas -->
                          <div class="collapse" id="appliance_gas">
                              <div class="card card-body">
                               <p class="fs-4">Do you smell gas?</p>
                               <div class="form-check">
                                  <input class="form-check-input" type="radio" name="gas_check" value="gas_check1">
                                  <label class="form-check-label" for="gas_check1">
                                  Yes
                                  </label>
                               </div>
                               <div class="form-check">
                                  <input class="form-check-input" type="radio" name="gas_check" value="gas_check2">
                                  <label class="form-check-label" for="gas_check2">
                                  No
                                  </label>
                               </div>
                              </div>
                          </div>

                          <!-- Appliance glass hit -->
                          <div class="collapse" id="glass_hit">
                            <div class="card card-body">
                              <p class="fs-4">Was the glass hit by an object?</p>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="glass_hit" value="glass_hit1">
                                    <label class="form-check-label" for="glass_hit1">
                                    Yes
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="glass_hit" value="glass_hit2">
                                    <label class="form-check-label" for="glass_hit2">
                                    No
                                    </label>
                                 </div>
                            </div>
                          </div>

                          <!-- Appliance smoke -->
                          <div class="collapse" id="appliance_smoke">
                            <div class="card card-body">
                              <p class="fs-4">Do you smell smoke?</p>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="smoke_check" value="smoke_check1">
                                    <label class="form-check-label" for="smoke_check1">
                                    Yes
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="smoke_check" value="smoke_check2">
                                    <label class="form-check-label" for="smoke_check2">
                                    No
                                    </label>
                                 </div>
                            </div>
                          </div>




                           <!-- Meter set of questions -->
                           <div class="collapse" id="meter_choose">
                              <div class="card card-body">
                                 <p class="fs-4">Choose the description of your problem:</p>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="meter_desc" value="meter_desc1">
                                    <label class="form-check-label" for="meter_desc1">
                                    Packed Snow/Ice
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="meter_desc" value="meter_desc2">
                                    <label class="form-check-label" for="meter_desc2">
                                    Meter Wrapped/Covered
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="meter_desc" value="meter_desc3">
                                    <label class="form-check-label" for="meter_desc3">
                                    Meter Under Water
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="meter_desc" value="meter_desc4">
                                    <label class="form-check-label" for="meter_desc4">
                                    Meter Covered With Snow
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="meter_desc" value="meter_desc5">
                                    <label class="form-check-label" for="meter_desc5">
                                    Overhead Meter Hazard
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="meter_desc" value="meter_desc6">
                                    <label class="form-check-label" for="meter_desc6">
                                    Noisy Meter
                                    </label>
                                 </div>
                              </div>
                           </div>

                           <!-- Meter regulator -->
                           <div class="collapse" id="meter_regulator">
                            <div class="card card-body">
                              <p class="fs-4">Is the Meter Regulator also immersed?</p>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="reg_check" value="reg_check1">
                                    <label class="form-check-label" for="reg_check1">
                                    Yes
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="reg_check" value="reg_check2">
                                    <label class="form-check-label" for="reg_check2">
                                    No
                                    </label>
                                 </div>
                            </div>
                          </div>

                          <!-- Meter gas -->
                          <div class="collapse" id="meter_gas">
                            <div class="card card-body">
                              <p class="fs-4">Do you smell gas?</p>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="gas_meter_check" value="gas_meter_check1">
                                    <label class="form-check-label" for="gas_meter_check1">
                                    Yes
                                    </label>
                                 </div>
                                 <div class="form-check">
                                    <input class="form-check-input" type="radio" name="gas_meter_check" value="gas_meter_check2">
                                    <label class="form-check-label" for="gas_meter_check2">
                                    No
                                    </label>
                                 </div>
                            </div>
                          </div>



                        </form>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>


<script>
$(document).ready(function() {

   
  
  // Listen for radio button change event
  $('input[type=radio][name=emergency_nature]').change(function() {
    var selectedValue = $(this).val();
    
    if (selectedValue === 'emergency_nature1') {
      // Show the collapse element
      $('#meter_choose').collapse('show');
    } else {
      // Hide the collapse element
      $('#meter_choose').collapse('hide');
      $('#meter_choose').find('input[type=radio]').prop('checked', false);
      $('#meter_regulator').collapse('hide');
      $('#meter_regulator').find('input[type=radio]').prop('checked', false);
      $('#meter_gas').collapse('hide');
      $('#meter_gas').find('input[type=radio]').prop('checked', false);
    }

    if (selectedValue === 'emergency_nature2') {
      // Show the collapse element
      $('#appliance_choose').collapse('show');
    } else {
      // Hide the collapse element
      $('#appliance_choose').collapse('hide');
      $('#appliance_choose').find('input[type=radio]').prop('checked', false);
      $('#appliance_gas').collapse('hide');
      $('#appliance_gas').find('input[type=radio]').prop('checked', false);
      $('#appliance_smoke').collapse('hide');
      $('#appliance_smoke').find('input[type=radio]').prop('checked', false);
    }
  });



    $('input[type=radio][name=appliance_desc]').change(function() {
    var selectedValue = $(this).val();
    $('#appliance_smoke').find('input[type=radio]').prop('checked', false);
    $('#appliance_gas').find('input[type=radio]').prop('checked', false);
    $('#glass_hit').find('input[type=radio]').prop('checked', false);

    if (selectedValue === 'appliance_desc5' || selectedValue === 'appliance_desc4'){
      $('#appliance_gas').collapse('show');
      $('#appliance_smoke').collapse('show');
      $('#glass_hit').collapse('hide');
      
    }
    else if (selectedValue === 'appliance_desc3'){
      $('#glass_hit').collapse('show');
      $('#appliance_gas').collapse('hide');
      $('#appliance_smoke').collapse('hide');
    }
    else if(selectedValue === 'appliance_desc1' || selectedValue === 'appliance_desc2'|| selectedValue === 'appliance_desc6'){
      $('#appliance_gas').collapse('show');
      $('#appliance_smoke').collapse('hide');
      $('#glass_hit').collapse('hide');
    }
  });



    $('input[type=radio][name=meter_desc]').change(function() {
    var selectedValue = $(this).val();
    $('#meter_regulator').find('input[type=radio]').prop('checked', false);
    $('#meter_gas').find('input[type=radio]').prop('checked', false);
    
    if (selectedValue === 'meter_desc3') {
      // Show the collapse element
      $('#meter_regulator').collapse('show');
      // Hide the collapse element
      $('#meter_gas').collapse('hide');
    }

    else if (selectedValue === 'meter_desc6') {
      // Show the collapse element
      $('#meter_gas').collapse('show');
      // Hide the collapse element
      $('#meter_regulator').collapse('hide');
    }
    else{
      $('#meter_regulator').collapse('hide');
      $('#meter_gas').collapse('hide');
    }
  });




  var totalRadioButtons = 6;
  // Calculate the width increment for each radio button
  var widthIncrement = 100 / totalRadioButtons;

  // Listen for radio button change event
  $('input[type=radio]').change(function() {
      var checkedRadioButtons = $('input[type=radio]:checked').length;
      var progressBarWidth = checkedRadioButtons * widthIncrement;
      $('.progress-bar').css('width', progressBarWidth + '%').attr('aria-valuenow', progressBarWidth);
  });


});

document.addEventListener('DOMContentLoaded', function() {


   var initButtons = document.querySelectorAll('input[type=radio][name=response_type], input[type=radio][name=building_type]');

   initButtons.forEach(function(button) {
      button.addEventListener('change', function() {
         var response_val = document.querySelector('input[type=radio][name=response_type]:checked');
         var building_val = document.querySelector('input[type=radio][name=building_type]:checked');

         if (response_val !== null && building_val !== null) {
            $('input[type=radio][name=glass_hit]').change(function() {
            window.location.href = "/nonusers/submit";
         
         });

         $('input[type=radio][name=gas_meter_check]').change(function() {
            window.location.href = "/nonusers/submit";
         
         });

         $('input[type=radio][name=reg_check]').change(function() {
            window.location.href = "/nonusers/submit";
         
         });


            var gasButtons = document.querySelectorAll('input[type=radio][name=gas_check]');
            gasButtons.forEach(function(button) {
               button.addEventListener('change', function() {
                  var appliance_val = document.querySelector('input[type=radio][name=appliance_desc]:checked').value;
                  var gas_appl_check = document.querySelector('input[type=radio][name=gas_check]:checked').value;
                  console.log(appliance_val);
                  if ((appliance_val === 'appliance_desc1' || appliance_val === 'appliance_desc2' || appliance_val === 'appliance_desc6') && gas_appl_check != '') {
                     
                     window.location.href = "/nonusers/submit";
                  }
               });
            });

            var smokeButtons = document.querySelectorAll('input[type=radio][name=smoke_check]');
            smokeButtons.forEach(function(button) {
               button.addEventListener('change', function() {
                  var gas_appl_check = document.querySelector('input[type=radio][name=gas_check]:checked').value;
                  var smoke_appl_check = document.querySelector('input[type=radio][name=smoke_check]:checked').value;

                  if (smoke_appl_check !== '' && gas_appl_check !== '') {
                     window.location.href = "/nonusers/submit";
                  }
               });
            });

            var meterButtons = document.querySelectorAll('input[type=radio][name=meter_desc]');
            meterButtons.forEach(function(button) {
               button.addEventListener('change', function() {
                  var meter_val = document.querySelector('input[type=radio][name=meter_desc]:checked').value;

                  if (meter_val !== 'meter_desc3' && meter_val !== 'meter_desc6') {
                     window.location.href = "/nonusers/submit";
                  }
               });
            });
         }
      });
   });
});

</script>




      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js" integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS" crossorigin="anonymous"></script>
   </body>
</html>